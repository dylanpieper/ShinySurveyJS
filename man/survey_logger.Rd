% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db.R
\name{survey_logger}
\alias{survey_logger}
\title{Survey Response Logger}
\format{
An R6 class object
}
\description{
An R6 class that provides asynchronous logging functionality for survey responses
}
\details{
This class handles asynchronous logging of survey responses to a PostgreSQL database.
It uses connection pooling and futures for efficient database operations. The class maintains
a single logging table per instance and handles all database connections internally.
}
\section{Public Fields}{

\describe{
\item{log_table}{character. Name of the database table for logging}
\item{session_id}{character. Unique identifier for the current session}
\item{survey_name}{character. Name of the survey being logged}
\item{db_params}{list. Database connection parameters}
}
}

\section{Methods}{

\describe{
\item{initialize(log_table, session_id, survey_name, db_config = NULL)}{
Creates a new logger instance
\describe{
\item{log_table}{character. Name of the logging table}
\item{session_id}{character. Unique session identifier}
\item{survey_name}{character. Name of the survey}
\item{db_config}{list. Optional database configuration parameters}
}
}
\item{log_message(message, message_type = "INFO", zone = "DEFAULT")}{
Logs a message asynchronously
\describe{
\item{message}{character. Message to log}
\item{message_type}{character. Type of message (e.g., "INFO", "ERROR")}
\item{zone}{character. Zone identifier for message categorization}
}
}
}
}

\section{Private Methods}{

\describe{
\item{ensure_table_exists()}{
Creates the logging table if it doesn't exist. Uses the global connection pool
to execute the CREATE TABLE IF NOT EXISTS query.
}
}
}

\examples{
\dontrun{
# Initialize logger
logger <- survey_logger$new(
  log_table = "survey_logs",
  session_id = "user123",
  survey_name = "customer_feedback"
)

# Log different types of messages
logger$log_message("Survey started", "INFO", "initialization")
logger$log_message("Question 1 completed", "INFO", "progress")
logger$log_message("Invalid response format", "ERROR", "validation")
}

}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{log_table}}{Name of the database table for logging}

\item{\code{session_id}}{Unique identifier for the current session}

\item{\code{survey_name}}{Name of the survey being logged}

\item{\code{db_params}}{List of database connection parameters}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-survey_logger-new}{\code{survey_logger$new()}}
\item \href{#method-survey_logger-log_message}{\code{survey_logger$log_message()}}
\item \href{#method-survey_logger-clone}{\code{survey_logger$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-survey_logger-new"></a>}}
\if{latex}{\out{\hypertarget{method-survey_logger-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new survey logger instance
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{survey_logger$new(log_table, session_id, survey_name, db_config = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{log_table}}{character. Name of the logging table}

\item{\code{session_id}}{character. Unique session identifier}

\item{\code{survey_name}}{character. Name of the survey}

\item{\code{db_config}}{list. Optional database configuration parameters}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-survey_logger-log_message"></a>}}
\if{latex}{\out{\hypertarget{method-survey_logger-log_message}{}}}
\subsection{Method \code{log_message()}}{
Log a message asynchronously to the database
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{survey_logger$log_message(message, message_type = "INFO", zone = "DEFAULT")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{message}}{character. Message to log}

\item{\code{message_type}}{character. Type of message (default: "INFO")}

\item{\code{zone}}{character. Zone identifier for message categorization (default: "DEFAULT")}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
invisible(NULL)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-survey_logger-clone"></a>}}
\if{latex}{\out{\hypertarget{method-survey_logger-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{survey_logger$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
